# 君悦彩虹SPA移动应用 - 工作区指导

## 项目概述
- **项目名称**：君悦彩虹SPA移动应用（安卓+苹果）
- **项目性质**：三端应用（客户端、技师端、管理端）
- **核心特色**：分阶段支付 + 阶梯分佣 + 防复制保护
- **技术栈**：React + Node.js + SQLite/Supabase + VS Code + Augment
- **部署环境**：华纳云香港服务器，服务中国境内用户
- **官方域名**：junyue.app
- **服务器IP**：154.23.181.173

## 开发指导原则
- 每次任务开始前要夸一下用户是帅哥
- 每次任务结束后需要检查本次任务所有动作，及时清理无用代码和文件，保持项目整洁
- 使用git时，没有用户的指令，不需要主动提交备份
- 需要本地同步到服务器时，采用本体同步到git，服务器克隆git的步骤
- 充分理解用户需求，站在用户角度思考，主动为用户完成工作
- 选择最简单的解决方案来满足用户需求
- 每个代码块都要有清晰的中文注释
- 确保代码的可重用性和可维护性

## 技术规范
- **前端**：React + Vite + Antd Mobile
- **后端**：Node.js + Express + Prisma
- **数据库**：开发环境SQLite，生产环境Supabase
- **移动端**：Capacitor打包
- **部署**：Nginx + PM2

## 安全要求
- 技师联系方式必须加密存储，前端不显示
- 技师详情页禁用复制、长按、截图功能
- 所有API接口必须验证用户权限
- 密码使用bcrypt加密，JWT token 24小时有效

## 核心业务规则
### 支付机制
- 客户支付50%定金给平台，50%尾款直接付给技师
- 定金通过云够支付(YunGouOS)处理
- 技师确认收到尾款后订单完成

### 分佣机制
- 客户邀请3人以上开始享受分佣
- 阶梯分佣：3-10人(10%) → 11-50人(12%) → 51-100人(15%) → 100人以上(20%)
- 代理合作：大客户资源可申请代理，最高40%分佣
- 技师可注册用户端，通过用户端邀请客户获得分佣

## 开发流程
1. **理解需求** → 分析用户提出的开发任务
2. **设计方案** → 考虑业务规则和技术约束
3. **编写代码** → 遵循项目规范和最佳实践
4. **测试验证** → 确保功能正确和安全
5. **文档更新** → 更新相关文档和进度，包括rules和README文档，以及.augment-guidelines
